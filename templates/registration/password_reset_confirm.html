{% extends 'base_generic.html' %}
{% load django_bootstrap5 %}

{% block title %}
  {% if validlink %}
    Change Password â€“ Django Boards
  {% else %}
    Invalid Reset Link
  {% endif %}
{% endblock %}

{% block content %}
<div class="text-center mb-4">
  <h3 class="fw-bold text-primary">Django Boards</h3>
  <p class="lead mb-0">
    {% if validlink %}
      Change Password
    {% else %}
      Reset Your Password
    {% endif %}
  </p>
</div>

<div class="card mx-auto shadow-sm border-0" style="max-width: 420px;">
  <div class="card-body p-4">
    {% if validlink %}
      <h4 class="text-center mb-4">Change password for <span class="text-primary">@{{ form.user.username }}</span></h4>

      <form method="post" novalidate>
        {% csrf_token %}
        {% bootstrap_form form layout='floating' %}
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-success rounded-pill">
            <i class="bi bi-key-fill me-1"></i> Change Password
          </button>
        </div>
      </form>
    {% else %}
      <h4 class="text-center text-danger mb-3">Invalid or Expired Link</h4>
      <p class="text-center text-muted">
        It looks like your password reset link is invalid or has expired.  
        You can request a new one below.
      </p>
      <div class="d-grid mt-4">
        <a href="{% url 'accounts:reset' %}" class="btn btn-outline-secondary rounded-pill">
          Request New Password Reset
        </a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
